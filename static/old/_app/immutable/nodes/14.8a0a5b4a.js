import{S as yi,i as bi,s as gi,y as m,a as d,k as a,q as o,z as h,c,l as s,m as n,r,h as l,n as f,T as wi,A as p,b as u,G as e,H as xi,g as E,d as v,B as $}from"../chunks/index.a7566c1a.js";import{H as ue}from"../chunks/HeadingLink.20322812.js";import{C as T}from"../chunks/CodeBlock.a090ee9b.js";import{F as qi}from"../chunks/FilterSyntax.3a84ec87.js";import{T as ki}from"../chunks/Toc.c31a36b6.js";function Oi(_i){let X,Dl,fe,Il,me,ct,$o,_o,Ll,te,yo,ut,bo,go,Tl,g,ft,mt,wo,xo,ht,pt,qo,ko,Et,vt,Oo,Co,$t,_t,Ro,Do,yt,bt,Io,Pl,le,Lo,gt,To,Po,Al,Fe,Ao,Sl,P,A,wt,So,No,xt,zo,Fo,qt,Go,Bo,Mo,Ge,kt,Uo,Ho,Yo,Be,Ot,Vo,jo,Nl,J,Me,Ct,Xo,S,N,Rt,Jo,Ko,Qo,Wo,Dt,Zo,er,tr,y,lr,It,or,rr,Lt,ar,sr,Tt,nr,ir,Pt,dr,cr,At,ur,fr,mr,hr,pr,he,Er,St,vr,$r,zl,pe,Fl,Ue,_r,Gl,K,Hs,Bl,oe,yr,Nt,br,gr,Ml,z,Q,zt,wr,xr,qr,kr,Ft,Or,Cr,W,Gt,Bt,Rr,Dr,Ir,Lr,b,D,Mt,Tr,Pr,Ut,Ar,Sr,Nr,zr,w,Fr,Ht,Gr,Br,Yt,Mr,Ur,Vt,Hr,Yr,jt,Vr,jr,Xr,re,Xt,Jr,Kr,Jt,Qr,Wr,Zr,I,Kt,ea,ta,Qt,la,oa,ra,aa,He,sa,na,ae,Wt,ia,da,Zt,ca,ua,fa,se,el,ma,ha,tl,pa,Ea,va,L,ll,$a,_a,ol,ya,ba,ga,wa,F,xa,Ye,qa,ka,rl,Oa,Ca,Ra,O,al,sl,Da,Ia,nl,La,Ta,Ee,Pa,ve,Aa,il,Sa,Na,za,$e,Ul,_e,Hl,ye,Yl,be,Vl,Ve,Fa,jl,ge,Xl,je,Ga,Jl,we,Kl,xe,Ql,G,Ba,dl,Ma,Ua,cl,Ha,Ya,Wl,qe,Zl,Xe,B,Va,Je,ja,Xa,ul,Ja,Ka,eo,ke,to,_,Qa,fl,Wa,Za,ml,es,ts,hl,ls,os,pl,rs,as,ss,ns,El,is,ds,lo,Oe,oo,Ke,M,cs,Qe,us,fs,vl,ms,hs,ro,Ce,ao,x,ps,$l,Es,vs,_l,$s,_s,yl,ys,bs,bl,gs,ws,so,Re,no,We,U,xs,Ze,qs,ks,gl,Os,Cs,io,De,co,C,Ie,Rs,Le,Ds,Te,Is,Pe,Ls,Z,Ts,wl,Ps,As,Ae,Ss,ee,Ns,xl,zs,Fs,Se,uo;return X=new ki({}),fe=new ue({props:{title:"API rules"}}),pe=new ue({props:{title:"Filters syntax"}}),Ee=new T({props:{content:`
                @collection.news.categoryId ?= categoryId && @collection.news.author ?= @request.auth.id
            `}}),$e=new T({props:{content:`
                // see https://github.com/pocketbase/pocketbase/discussions/3805#discussioncomment-7634791
                @request.auth.id != "" &&
                @collection.courseRegistrations.user ?= id &&
                @collection.courseRegistrations:auth.user ?= @request.auth.id &&
                @collection.courseRegistrations.courseGroup ?= @collection.courseRegistrations:auth.courseGroup
            `}}),_e=new qi({}),ye=new ue({props:{title:"Special identifiers and modifiers"}}),be=new ue({props:{title:"@ macros",tag:"h5"}}),ge=new T({props:{language:"html",content:`
        // all macros are UTC based
        @now        - the current datetime as string
        @second     - @now second number (0-59)
        @minute     - @now minute number (0-59)
        @hour       - @now hour number (0-23)
        @weekday    - @now weekday number (0-6)
        @day        - @now day number
        @month      - @now month number
        @year       - @now year number
        @todayStart - beginning of the current day as datetime string
        @todayEnd   - end of the current day as datetime string
        @monthStart - beginning of the current month as datetime string
        @monthEnd   - end of the current month as datetime string
        @yearStart  - beginning of the current year as datetime string
        @yearEnd    - end of the current year as datetime string
    `}}),we=new T({props:{content:"@request.data.publicDate >= @now"}}),xe=new ue({props:{title:":isset modifier",tag:"h5"}}),qe=new T({props:{content:`
        @request.data.role:isset = false
    `}}),ke=new ue({props:{title:":length modifier",tag:"h5"}}),Oe=new T({props:{content:`
        // check example submitted data: {"someSelectField": ["val1", "val2"]}
        @request.data.someSelectField:length > 1

        // check existing record field length
        someRelationField:length = 2
    `}}),Ce=new ue({props:{title:":each modifier",tag:"h5"}}),Re=new T({props:{content:`
        // check if all submitted select options contain the "create" text
        @request.data.someSelectField:each ~ "create"

        // check if all existing someSelectField has "pb_" prefix
        someSelectField:each ~ "pb_%"
    `}}),De=new ue({props:{title:"Examples"}}),Le=new T({props:{content:`
                @request.auth.id != ""
            `}}),Pe=new T({props:{content:`
                @request.auth.id != "" && (status = "active" || status = "pending")
            `}}),Ae=new T({props:{content:`
                @request.auth.id != "" && allowed_users.id ?= @request.auth.id
            `}}),Se=new T({props:{content:`
                title ~ "Lorem%"
            `}}),{c(){m(X.$$.fragment),Dl=d(),m(fe.$$.fragment),Il=d(),me=a("p"),ct=a("strong"),$o=o("API Rules"),_o=o(" are your collection access controls and data filters."),Ll=d(),te=a("p"),yo=o("Each collection has "),ut=a("strong"),bo=o("5 rules"),go=o(", corresponding to the specific API action:"),Tl=d(),g=a("ul"),ft=a("li"),mt=a("code"),wo=o("listRule"),xo=d(),ht=a("li"),pt=a("code"),qo=o("viewRule"),ko=d(),Et=a("li"),vt=a("code"),Oo=o("createRule"),Co=d(),$t=a("li"),_t=a("code"),Ro=o("updateRule"),Do=d(),yt=a("li"),bt=a("code"),Io=o("deleteRule"),Pl=d(),le=a("p"),Lo=o("Auth collections has an additional "),gt=a("code"),To=o("options.manageRule"),Po=o(` used to allow one user (it could be even
    from a different collection) to be able to fully manage the data of another user (ex. changing their email,
    password, etc.).`),Al=d(),Fe=a("p"),Ao=o("Each rule could be set to:"),Sl=d(),P=a("ul"),A=a("li"),wt=a("strong"),So=o('"locked"'),No=o(" - aka. "),xt=a("code"),zo=o("null"),Fo=o(`, which means that the action could be performed
        only by an authorized admin
        
        (`),qt=a("strong"),Go=o("this is the default"),Bo=o(")"),Mo=d(),Ge=a("li"),kt=a("strong"),Uo=o("Empty string"),Ho=o(` - anyone will be able to perform the action (admins, authorized users and
        guests)`),Yo=d(),Be=a("li"),Ot=a("strong"),Vo=o("Non-empty string"),jo=o(` - only users (authorized or not) that satisfy the rule filter expression
        will be able to perform this action`),Nl=d(),J=a("div"),Me=a("div"),Ct=a("i"),Xo=d(),S=a("div"),N=a("p"),Rt=a("strong"),Jo=o("PocketBase API Rules act also as records filter!"),Ko=d(),Qo=a("br"),Wo=o(`
            Or in other words, you could for example allow listing only the "active" records of your collection,
            by using a simple filter expression such as:
            `),Dt=a("code"),Zo=o('status = "active"'),er=o(`
            (where "status" is a field defined in your Collection).`),tr=d(),y=a("p"),lr=o(`Because of the above, the API will return 200 empty items response in case a request doesn't
            satisfy a `),It=a("code"),or=o("listRule"),rr=o(", 400 for unsatisfied "),Lt=a("code"),ar=o("createRule"),sr=o(` and 404 for
            unsatisfied `),Tt=a("code"),nr=o("viewRule"),ir=o(", "),Pt=a("code"),dr=o("updateRule"),cr=o(" and "),At=a("code"),ur=o("deleteRule"),fr=o(`.
            `),mr=a("br"),hr=o(`
            All rules will return 403 in case they were "locked" (aka. admin only) and the request client is not
            an admin.`),pr=d(),he=a("p"),Er=o("The API Rules are ignored when the action is performed by an authorized admin ("),St=a("strong"),vr=o("admins can access everything"),$r=o(")!"),zl=d(),m(pe.$$.fragment),Fl=d(),Ue=a("p"),_r=o("You could find information about the supported fields in your collection API rules tab:"),Gl=d(),K=a("img"),Bl=d(),oe=a("p"),yr=o(`There is autocomplete to help you guide you while typing the rule filter expression, but in general, you
    have access to
    `),Nt=a("strong"),br=o("3 groups of fields"),gr=o(":"),Ml=d(),z=a("ul"),Q=a("li"),zt=a("strong"),wr=o("Your Collection schema fields"),xr=d(),qr=a("br"),kr=o(`
        This also include all nested relations fields too, ex.
        `),Ft=a("code"),Or=o('someRelField.status != "pending"'),Cr=d(),W=a("li"),Gt=a("code"),Bt=a("strong"),Rr=o("@request.*"),Dr=d(),Ir=a("br"),Lr=o(`
        Used to access the current request data, such as query parameters, body/form data, authorized user state,
        etc.
        `),b=a("ul"),D=a("li"),Mt=a("code"),Tr=o("@request.context"),Pr=o(` - the context where the rule is used (ex.
                `),Ut=a("code"),Ar=o('@request.context != "oauth2"'),Sr=o(`)
                `),Nr=a("br"),zr=d(),w=a("small"),Fr=o("The currently supported context values are "),Ht=a("code"),Gr=o("default"),Br=o(", "),Yt=a("code"),Mr=o("oauth2"),Ur=o(`,
                    `),Vt=a("code"),Hr=o("realtime"),Yr=o(", "),jt=a("code"),Vr=o("protectedFile"),jr=o("."),Xr=d(),re=a("li"),Xt=a("code"),Jr=o("@request.method"),Kr=o(` - the HTTP request method (ex.
                `),Jt=a("code"),Qr=o('@request.method = "GET"'),Wr=o(")"),Zr=d(),I=a("li"),Kt=a("code"),ea=o("@request.headers.*"),ta=o(` - the request headers as string values (ex.
                `),Qt=a("code"),la=o('@request.headers.x_token = "test"'),oa=o(`)
                `),ra=a("br"),aa=d(),He=a("small"),sa=o(`Note: All header keys are normalized to lowercase and "-" is replaced with "_" (for
                    example "X-Token" is "x_token").`),na=d(),ae=a("li"),Wt=a("code"),ia=o("@request.query.*"),da=o(` - the request query parameters as string values (ex.
                `),Zt=a("code"),ca=o('@request.query.page = "1"'),ua=o(")"),fa=d(),se=a("li"),el=a("code"),ma=o("@request.auth.*"),ha=o(` - the current authenticated model (ex.
                `),tl=a("code"),pa=o('@request.auth.id != ""'),Ea=o(")"),va=d(),L=a("li"),ll=a("code"),$a=o("@request.data.*"),_a=o(` - the submitted body parameters (ex.
                `),ol=a("code"),ya=o('@request.data.title != ""'),ba=o(`)
                `),ga=a("br"),wa=d(),F=a("small"),xa=o("Note: Uploaded files are not part of the "),Ye=a("code"),qa=o("@request.data"),ka=o(`
                    because they are evaluated separately (`),rl=a("em"),Oa=o("this behavior may change in the future"),Ca=o(")."),Ra=d(),O=a("li"),al=a("code"),sl=a("strong"),Da=o("@collection.*"),Ia=d(),nl=a("p"),La=o(`This filter could be used to target other collections that are not directly related to the current
            one (aka. there is no relation field pointing to it) but both shares a common field value, like
            for example a category id:`),Ta=d(),m(Ee.$$.fragment),Pa=d(),ve=a("p"),Aa=o(`In case you want to join the same collection multiple times but based on different criteria, you
            can define an alias by appending `),il=a("code"),Sa=o(":alias"),Na=o(" suffix to the collection name."),za=d(),m($e.$$.fragment),Ul=d(),m(_e.$$.fragment),Hl=d(),m(ye.$$.fragment),Yl=d(),m(be.$$.fragment),Vl=d(),Ve=a("p"),Fa=o("The following datetime macros are available and can be used as part of the filter expression:"),jl=d(),m(ge.$$.fragment),Xl=d(),je=a("p"),Ga=o("For example:"),Jl=d(),m(we.$$.fragment),Kl=d(),m(xe.$$.fragment),Ql=d(),G=a("p"),Ba=o("The "),dl=a("code"),Ma=o(":isset"),Ua=o(" field modifier is available only for the "),cl=a("code"),Ha=o("@request.*"),Ya=o(` fields and can be
    used to check whether the client submitted a specific data with the request. Here is for example a rule that
    disallows changing a "role" field:`),Wl=d(),m(qe.$$.fragment),Zl=d(),Xe=a("p"),B=a("small"),Va=o("Note that "),Je=a("code"),ja=o("@request.data.*:isset"),Xa=o(` at the moment doesn't support checking for
        new uploaded files because they are evaluated separately and cannot be serialized (`),ul=a("em"),Ja=o("this behavior may change in the future"),Ka=o(")."),eo=d(),m(ke.$$.fragment),to=d(),_=a("p"),Qa=o("The "),fl=a("code"),Wa=o(":length"),Za=o(` field modifier could be used to check the number of items in an array field
    (multiple `),ml=a("code"),es=o("file"),ts=o(", "),hl=a("code"),ls=o("select"),os=o(", "),pl=a("code"),rs=o("relation"),as=o(`).
    `),ss=a("br"),ns=o(`
    Could be used with both the collection schema fields and the `),El=a("code"),is=o("@request.data.*"),ds=o(" fields. For example:"),lo=d(),m(Oe.$$.fragment),oo=d(),Ke=a("p"),M=a("small"),cs=o("Note that "),Qe=a("code"),us=o("@request.data.*:length"),fs=o(` at the moment doesn't support checking
        for new uploaded files because they are evaluated separately and cannot be serialized (`),vl=a("em"),ms=o("this behavior may change in the future"),hs=o(")."),ro=d(),m(Ce.$$.fragment),ao=d(),x=a("p"),ps=o("The "),$l=a("code"),Es=o(":each"),vs=o(" field modifier works only with multiple "),_l=a("code"),$s=o("select"),_s=o(", "),yl=a("code"),ys=o("file"),bs=o(` and
    `),bl=a("code"),gs=o("relation"),ws=o(`
    type fields. It could be used to apply a condition on each item from the field array. For example:`),so=d(),m(Re.$$.fragment),no=d(),We=a("p"),U=a("small"),xs=o("Note that "),Ze=a("code"),qs=o("@request.data.*:each"),ks=o(` at the moment doesn't support checking for
        new uploaded files because they are evaluated separately and cannot be serialized (`),gl=a("em"),Os=o("this behavior may change in the future"),Cs=o(")."),io=d(),m(De.$$.fragment),co=d(),C=a("ul"),Ie=a("li"),Rs=o(`Allow only registered users:
        `),m(Le.$$.fragment),Ds=d(),Te=a("li"),Is=o(`Allow only registered users and return records that are either "active" or "pending":
        `),m(Pe.$$.fragment),Ls=d(),Z=a("li"),Ts=o("Allow only registered users who are listed in an "),wl=a("em"),Ps=o("allowed_users"),As=o(` multi-relation field value:
        `),m(Ae.$$.fragment),Ss=d(),ee=a("li"),Ns=o("Allow access by anyone and return only the records where the "),xl=a("em"),zs=o("title"),Fs=o(` field value starts with
        "Lorem" (ex. "Lorem ipsum"):
        `),m(Se.$$.fragment),this.h()},l(t){h(X.$$.fragment,t),Dl=c(t),h(fe.$$.fragment,t),Il=c(t),me=s(t,"P",{});var i=n(me);ct=s(i,"STRONG",{});var Ys=n(ct);$o=r(Ys,"API Rules"),Ys.forEach(l),_o=r(i," are your collection access controls and data filters."),i.forEach(l),Ll=c(t),te=s(t,"P",{});var fo=n(te);yo=r(fo,"Each collection has "),ut=s(fo,"STRONG",{});var Vs=n(ut);bo=r(Vs,"5 rules"),Vs.forEach(l),go=r(fo,", corresponding to the specific API action:"),fo.forEach(l),Tl=c(t),g=s(t,"UL",{});var H=n(g);ft=s(H,"LI",{});var js=n(ft);mt=s(js,"CODE",{});var Xs=n(mt);wo=r(Xs,"listRule"),Xs.forEach(l),js.forEach(l),xo=c(H),ht=s(H,"LI",{});var Js=n(ht);pt=s(Js,"CODE",{});var Ks=n(pt);qo=r(Ks,"viewRule"),Ks.forEach(l),Js.forEach(l),ko=c(H),Et=s(H,"LI",{});var Qs=n(Et);vt=s(Qs,"CODE",{});var Ws=n(vt);Oo=r(Ws,"createRule"),Ws.forEach(l),Qs.forEach(l),Co=c(H),$t=s(H,"LI",{});var Zs=n($t);_t=s(Zs,"CODE",{});var en=n(_t);Ro=r(en,"updateRule"),en.forEach(l),Zs.forEach(l),Do=c(H),yt=s(H,"LI",{});var tn=n(yt);bt=s(tn,"CODE",{});var ln=n(bt);Io=r(ln,"deleteRule"),ln.forEach(l),tn.forEach(l),H.forEach(l),Pl=c(t),le=s(t,"P",{});var mo=n(le);Lo=r(mo,"Auth collections has an additional "),gt=s(mo,"CODE",{});var on=n(gt);To=r(on,"options.manageRule"),on.forEach(l),Po=r(mo,` used to allow one user (it could be even
    from a different collection) to be able to fully manage the data of another user (ex. changing their email,
    password, etc.).`),mo.forEach(l),Al=c(t),Fe=s(t,"P",{});var rn=n(Fe);Ao=r(rn,"Each rule could be set to:"),rn.forEach(l),Sl=c(t),P=s(t,"UL",{});var et=n(P);A=s(et,"LI",{});var Ne=n(A);wt=s(Ne,"STRONG",{});var an=n(wt);So=r(an,'"locked"'),an.forEach(l),No=r(Ne," - aka. "),xt=s(Ne,"CODE",{});var sn=n(xt);zo=r(sn,"null"),sn.forEach(l),Fo=r(Ne,`, which means that the action could be performed
        only by an authorized admin
        
        (`),qt=s(Ne,"STRONG",{});var nn=n(qt);Go=r(nn,"this is the default"),nn.forEach(l),Bo=r(Ne,")"),Ne.forEach(l),Mo=c(et),Ge=s(et,"LI",{});var Gs=n(Ge);kt=s(Gs,"STRONG",{});var dn=n(kt);Uo=r(dn,"Empty string"),dn.forEach(l),Ho=r(Gs,` - anyone will be able to perform the action (admins, authorized users and
        guests)`),Gs.forEach(l),Yo=c(et),Be=s(et,"LI",{});var Bs=n(Be);Ot=s(Bs,"STRONG",{});var cn=n(Ot);Vo=r(cn,"Non-empty string"),cn.forEach(l),jo=r(Bs,` - only users (authorized or not) that satisfy the rule filter expression
        will be able to perform this action`),Bs.forEach(l),et.forEach(l),Nl=c(t),J=s(t,"DIV",{class:!0});var ho=n(J);Me=s(ho,"DIV",{class:!0});var un=n(Me);Ct=s(un,"I",{class:!0}),n(Ct).forEach(l),un.forEach(l),Xo=c(ho),S=s(ho,"DIV",{class:!0});var tt=n(S);N=s(tt,"P",{});var ze=n(N);Rt=s(ze,"STRONG",{});var fn=n(Rt);Jo=r(fn,"PocketBase API Rules act also as records filter!"),fn.forEach(l),Ko=c(ze),Qo=s(ze,"BR",{}),Wo=r(ze,`
            Or in other words, you could for example allow listing only the "active" records of your collection,
            by using a simple filter expression such as:
            `),Dt=s(ze,"CODE",{});var mn=n(Dt);Zo=r(mn,'status = "active"'),mn.forEach(l),er=r(ze,`
            (where "status" is a field defined in your Collection).`),ze.forEach(l),tr=c(tt),y=s(tt,"P",{});var q=n(y);lr=r(q,`Because of the above, the API will return 200 empty items response in case a request doesn't
            satisfy a `),It=s(q,"CODE",{});var hn=n(It);or=r(hn,"listRule"),hn.forEach(l),rr=r(q,", 400 for unsatisfied "),Lt=s(q,"CODE",{});var pn=n(Lt);ar=r(pn,"createRule"),pn.forEach(l),sr=r(q,` and 404 for
            unsatisfied `),Tt=s(q,"CODE",{});var En=n(Tt);nr=r(En,"viewRule"),En.forEach(l),ir=r(q,", "),Pt=s(q,"CODE",{});var vn=n(Pt);dr=r(vn,"updateRule"),vn.forEach(l),cr=r(q," and "),At=s(q,"CODE",{});var $n=n(At);ur=r($n,"deleteRule"),$n.forEach(l),fr=r(q,`.
            `),mr=s(q,"BR",{}),hr=r(q,`
            All rules will return 403 in case they were "locked" (aka. admin only) and the request client is not
            an admin.`),q.forEach(l),pr=c(tt),he=s(tt,"P",{});var po=n(he);Er=r(po,"The API Rules are ignored when the action is performed by an authorized admin ("),St=s(po,"STRONG",{});var _n=n(St);vr=r(_n,"admins can access everything"),_n.forEach(l),$r=r(po,")!"),po.forEach(l),tt.forEach(l),ho.forEach(l),zl=c(t),h(pe.$$.fragment,t),Fl=c(t),Ue=s(t,"P",{});var yn=n(Ue);_r=r(yn,"You could find information about the supported fields in your collection API rules tab:"),yn.forEach(l),Gl=c(t),K=s(t,"IMG",{src:!0,alt:!0,class:!0,width:!0}),Bl=c(t),oe=s(t,"P",{});var Eo=n(oe);yr=r(Eo,`There is autocomplete to help you guide you while typing the rule filter expression, but in general, you
    have access to
    `),Nt=s(Eo,"STRONG",{});var bn=n(Nt);br=r(bn,"3 groups of fields"),bn.forEach(l),gr=r(Eo,":"),Eo.forEach(l),Ml=c(t),z=s(t,"UL",{});var lt=n(z);Q=s(lt,"LI",{});var ot=n(Q);zt=s(ot,"STRONG",{});var gn=n(zt);wr=r(gn,"Your Collection schema fields"),gn.forEach(l),xr=c(ot),qr=s(ot,"BR",{}),kr=r(ot,`
        This also include all nested relations fields too, ex.
        `),Ft=s(ot,"CODE",{});var wn=n(Ft);Or=r(wn,'someRelField.status != "pending"'),wn.forEach(l),ot.forEach(l),Cr=c(lt),W=s(lt,"LI",{});var rt=n(W);Gt=s(rt,"CODE",{});var xn=n(Gt);Bt=s(xn,"STRONG",{});var qn=n(Bt);Rr=r(qn,"@request.*"),qn.forEach(l),xn.forEach(l),Dr=c(rt),Ir=s(rt,"BR",{}),Lr=r(rt,`
        Used to access the current request data, such as query parameters, body/form data, authorized user state,
        etc.
        `),b=s(rt,"UL",{});var R=n(b);D=s(R,"LI",{});var ne=n(D);Mt=s(ne,"CODE",{});var kn=n(Mt);Tr=r(kn,"@request.context"),kn.forEach(l),Pr=r(ne,` - the context where the rule is used (ex.
                `),Ut=s(ne,"CODE",{});var On=n(Ut);Ar=r(On,'@request.context != "oauth2"'),On.forEach(l),Sr=r(ne,`)
                `),Nr=s(ne,"BR",{}),zr=c(ne),w=s(ne,"SMALL",{class:!0});var Y=n(w);Fr=r(Y,"The currently supported context values are "),Ht=s(Y,"CODE",{});var Cn=n(Ht);Gr=r(Cn,"default"),Cn.forEach(l),Br=r(Y,", "),Yt=s(Y,"CODE",{});var Rn=n(Yt);Mr=r(Rn,"oauth2"),Rn.forEach(l),Ur=r(Y,`,
                    `),Vt=s(Y,"CODE",{});var Dn=n(Vt);Hr=r(Dn,"realtime"),Dn.forEach(l),Yr=r(Y,", "),jt=s(Y,"CODE",{});var In=n(jt);Vr=r(In,"protectedFile"),In.forEach(l),jr=r(Y,"."),Y.forEach(l),ne.forEach(l),Xr=c(R),re=s(R,"LI",{});var ql=n(re);Xt=s(ql,"CODE",{});var Ln=n(Xt);Jr=r(Ln,"@request.method"),Ln.forEach(l),Kr=r(ql,` - the HTTP request method (ex.
                `),Jt=s(ql,"CODE",{});var Tn=n(Jt);Qr=r(Tn,'@request.method = "GET"'),Tn.forEach(l),Wr=r(ql,")"),ql.forEach(l),Zr=c(R),I=s(R,"LI",{});var ie=n(I);Kt=s(ie,"CODE",{});var Pn=n(Kt);ea=r(Pn,"@request.headers.*"),Pn.forEach(l),ta=r(ie,` - the request headers as string values (ex.
                `),Qt=s(ie,"CODE",{});var An=n(Qt);la=r(An,'@request.headers.x_token = "test"'),An.forEach(l),oa=r(ie,`)
                `),ra=s(ie,"BR",{}),aa=c(ie),He=s(ie,"SMALL",{class:!0});var Sn=n(He);sa=r(Sn,`Note: All header keys are normalized to lowercase and "-" is replaced with "_" (for
                    example "X-Token" is "x_token").`),Sn.forEach(l),ie.forEach(l),na=c(R),ae=s(R,"LI",{});var kl=n(ae);Wt=s(kl,"CODE",{});var Nn=n(Wt);ia=r(Nn,"@request.query.*"),Nn.forEach(l),da=r(kl,` - the request query parameters as string values (ex.
                `),Zt=s(kl,"CODE",{});var zn=n(Zt);ca=r(zn,'@request.query.page = "1"'),zn.forEach(l),ua=r(kl,")"),kl.forEach(l),fa=c(R),se=s(R,"LI",{});var Ol=n(se);el=s(Ol,"CODE",{});var Fn=n(el);ma=r(Fn,"@request.auth.*"),Fn.forEach(l),ha=r(Ol,` - the current authenticated model (ex.
                `),tl=s(Ol,"CODE",{});var Gn=n(tl);pa=r(Gn,'@request.auth.id != ""'),Gn.forEach(l),Ea=r(Ol,")"),Ol.forEach(l),va=c(R),L=s(R,"LI",{});var de=n(L);ll=s(de,"CODE",{});var Bn=n(ll);$a=r(Bn,"@request.data.*"),Bn.forEach(l),_a=r(de,` - the submitted body parameters (ex.
                `),ol=s(de,"CODE",{});var Mn=n(ol);ya=r(Mn,'@request.data.title != ""'),Mn.forEach(l),ba=r(de,`)
                `),ga=s(de,"BR",{}),wa=c(de),F=s(de,"SMALL",{class:!0});var at=n(F);xa=r(at,"Note: Uploaded files are not part of the "),Ye=s(at,"CODE",{class:!0});var Un=n(Ye);qa=r(Un,"@request.data"),Un.forEach(l),ka=r(at,`
                    because they are evaluated separately (`),rl=s(at,"EM",{});var Hn=n(rl);Oa=r(Hn,"this behavior may change in the future"),Hn.forEach(l),Ca=r(at,")."),at.forEach(l),de.forEach(l),R.forEach(l),rt.forEach(l),Ra=c(lt),O=s(lt,"LI",{});var V=n(O);al=s(V,"CODE",{});var Yn=n(al);sl=s(Yn,"STRONG",{});var Vn=n(sl);Da=r(Vn,"@collection.*"),Vn.forEach(l),Yn.forEach(l),Ia=c(V),nl=s(V,"P",{});var jn=n(nl);La=r(jn,`This filter could be used to target other collections that are not directly related to the current
            one (aka. there is no relation field pointing to it) but both shares a common field value, like
            for example a category id:`),jn.forEach(l),Ta=c(V),h(Ee.$$.fragment,V),Pa=c(V),ve=s(V,"P",{});var vo=n(ve);Aa=r(vo,`In case you want to join the same collection multiple times but based on different criteria, you
            can define an alias by appending `),il=s(vo,"CODE",{});var Xn=n(il);Sa=r(Xn,":alias"),Xn.forEach(l),Na=r(vo," suffix to the collection name."),vo.forEach(l),za=c(V),h($e.$$.fragment,V),V.forEach(l),lt.forEach(l),Ul=c(t),h(_e.$$.fragment,t),Hl=c(t),h(ye.$$.fragment,t),Yl=c(t),h(be.$$.fragment,t),Vl=c(t),Ve=s(t,"P",{});var Jn=n(Ve);Fa=r(Jn,"The following datetime macros are available and can be used as part of the filter expression:"),Jn.forEach(l),jl=c(t),h(ge.$$.fragment,t),Xl=c(t),je=s(t,"P",{});var Kn=n(je);Ga=r(Kn,"For example:"),Kn.forEach(l),Jl=c(t),h(we.$$.fragment,t),Kl=c(t),h(xe.$$.fragment,t),Ql=c(t),G=s(t,"P",{});var st=n(G);Ba=r(st,"The "),dl=s(st,"CODE",{});var Qn=n(dl);Ma=r(Qn,":isset"),Qn.forEach(l),Ua=r(st," field modifier is available only for the "),cl=s(st,"CODE",{});var Wn=n(cl);Ha=r(Wn,"@request.*"),Wn.forEach(l),Ya=r(st,` fields and can be
    used to check whether the client submitted a specific data with the request. Here is for example a rule that
    disallows changing a "role" field:`),st.forEach(l),Wl=c(t),h(qe.$$.fragment,t),Zl=c(t),Xe=s(t,"P",{});var Zn=n(Xe);B=s(Zn,"SMALL",{class:!0});var nt=n(B);Va=r(nt,"Note that "),Je=s(nt,"CODE",{class:!0});var ei=n(Je);ja=r(ei,"@request.data.*:isset"),ei.forEach(l),Xa=r(nt,` at the moment doesn't support checking for
        new uploaded files because they are evaluated separately and cannot be serialized (`),ul=s(nt,"EM",{});var ti=n(ul);Ja=r(ti,"this behavior may change in the future"),ti.forEach(l),Ka=r(nt,")."),nt.forEach(l),Zn.forEach(l),eo=c(t),h(ke.$$.fragment,t),to=c(t),_=s(t,"P",{});var k=n(_);Qa=r(k,"The "),fl=s(k,"CODE",{});var li=n(fl);Wa=r(li,":length"),li.forEach(l),Za=r(k,` field modifier could be used to check the number of items in an array field
    (multiple `),ml=s(k,"CODE",{});var oi=n(ml);es=r(oi,"file"),oi.forEach(l),ts=r(k,", "),hl=s(k,"CODE",{});var ri=n(hl);ls=r(ri,"select"),ri.forEach(l),os=r(k,", "),pl=s(k,"CODE",{});var ai=n(pl);rs=r(ai,"relation"),ai.forEach(l),as=r(k,`).
    `),ss=s(k,"BR",{}),ns=r(k,`
    Could be used with both the collection schema fields and the `),El=s(k,"CODE",{});var si=n(El);is=r(si,"@request.data.*"),si.forEach(l),ds=r(k," fields. For example:"),k.forEach(l),lo=c(t),h(Oe.$$.fragment,t),oo=c(t),Ke=s(t,"P",{});var ni=n(Ke);M=s(ni,"SMALL",{class:!0});var it=n(M);cs=r(it,"Note that "),Qe=s(it,"CODE",{class:!0});var ii=n(Qe);us=r(ii,"@request.data.*:length"),ii.forEach(l),fs=r(it,` at the moment doesn't support checking
        for new uploaded files because they are evaluated separately and cannot be serialized (`),vl=s(it,"EM",{});var di=n(vl);ms=r(di,"this behavior may change in the future"),di.forEach(l),hs=r(it,")."),it.forEach(l),ni.forEach(l),ro=c(t),h(Ce.$$.fragment,t),ao=c(t),x=s(t,"P",{});var j=n(x);ps=r(j,"The "),$l=s(j,"CODE",{});var ci=n($l);Es=r(ci,":each"),ci.forEach(l),vs=r(j," field modifier works only with multiple "),_l=s(j,"CODE",{});var ui=n(_l);$s=r(ui,"select"),ui.forEach(l),_s=r(j,", "),yl=s(j,"CODE",{});var fi=n(yl);ys=r(fi,"file"),fi.forEach(l),bs=r(j,` and
    `),bl=s(j,"CODE",{});var mi=n(bl);gs=r(mi,"relation"),mi.forEach(l),ws=r(j,`
    type fields. It could be used to apply a condition on each item from the field array. For example:`),j.forEach(l),so=c(t),h(Re.$$.fragment,t),no=c(t),We=s(t,"P",{});var hi=n(We);U=s(hi,"SMALL",{class:!0});var dt=n(U);xs=r(dt,"Note that "),Ze=s(dt,"CODE",{class:!0});var pi=n(Ze);qs=r(pi,"@request.data.*:each"),pi.forEach(l),ks=r(dt,` at the moment doesn't support checking for
        new uploaded files because they are evaluated separately and cannot be serialized (`),gl=s(dt,"EM",{});var Ei=n(gl);Os=r(Ei,"this behavior may change in the future"),Ei.forEach(l),Cs=r(dt,")."),dt.forEach(l),hi.forEach(l),io=c(t),h(De.$$.fragment,t),co=c(t),C=s(t,"UL",{});var ce=n(C);Ie=s(ce,"LI",{class:!0});var Ms=n(Ie);Rs=r(Ms,`Allow only registered users:
        `),h(Le.$$.fragment,Ms),Ms.forEach(l),Ds=c(ce),Te=s(ce,"LI",{class:!0});var Us=n(Te);Is=r(Us,`Allow only registered users and return records that are either "active" or "pending":
        `),h(Pe.$$.fragment,Us),Us.forEach(l),Ls=c(ce),Z=s(ce,"LI",{class:!0});var Cl=n(Z);Ts=r(Cl,"Allow only registered users who are listed in an "),wl=s(Cl,"EM",{});var vi=n(wl);Ps=r(vi,"allowed_users"),vi.forEach(l),As=r(Cl,` multi-relation field value:
        `),h(Ae.$$.fragment,Cl),Cl.forEach(l),Ss=c(ce),ee=s(ce,"LI",{class:!0});var Rl=n(ee);Ns=r(Rl,"Allow access by anyone and return only the records where the "),xl=s(Rl,"EM",{});var $i=n(xl);zs=r($i,"title"),$i.forEach(l),Fs=r(Rl,` field value starts with
        "Lorem" (ex. "Lorem ipsum"):
        `),h(Se.$$.fragment,Rl),Rl.forEach(l),ce.forEach(l),this.h()},h(){f(Ct,"class","ri-information-line"),f(Me,"class","icon"),f(S,"class","content"),f(J,"class","alert alert-info"),wi(K.src,Hs="/images/screenshots/collection-rules.png")||f(K,"src",Hs),f(K,"alt","Collection API Rules filters screenshot"),f(K,"class","screenshot"),f(K,"width","550"),f(w,"class","txt-hint"),f(He,"class","txt-hint"),f(Ye,"class","txt-sm"),f(F,"class","txt-hint"),f(Je,"class","txt-sm"),f(B,"class","txt-hint"),f(Qe,"class","txt-sm"),f(M,"class","txt-hint"),f(Ze,"class","txt-sm"),f(U,"class","txt-hint"),f(Ie,"class","m-b-sm"),f(Te,"class","m-b-sm"),f(Z,"class","m-b-sm"),f(ee,"class","m-b-sm")},m(t,i){p(X,t,i),u(t,Dl,i),p(fe,t,i),u(t,Il,i),u(t,me,i),e(me,ct),e(ct,$o),e(me,_o),u(t,Ll,i),u(t,te,i),e(te,yo),e(te,ut),e(ut,bo),e(te,go),u(t,Tl,i),u(t,g,i),e(g,ft),e(ft,mt),e(mt,wo),e(g,xo),e(g,ht),e(ht,pt),e(pt,qo),e(g,ko),e(g,Et),e(Et,vt),e(vt,Oo),e(g,Co),e(g,$t),e($t,_t),e(_t,Ro),e(g,Do),e(g,yt),e(yt,bt),e(bt,Io),u(t,Pl,i),u(t,le,i),e(le,Lo),e(le,gt),e(gt,To),e(le,Po),u(t,Al,i),u(t,Fe,i),e(Fe,Ao),u(t,Sl,i),u(t,P,i),e(P,A),e(A,wt),e(wt,So),e(A,No),e(A,xt),e(xt,zo),e(A,Fo),e(A,qt),e(qt,Go),e(A,Bo),e(P,Mo),e(P,Ge),e(Ge,kt),e(kt,Uo),e(Ge,Ho),e(P,Yo),e(P,Be),e(Be,Ot),e(Ot,Vo),e(Be,jo),u(t,Nl,i),u(t,J,i),e(J,Me),e(Me,Ct),e(J,Xo),e(J,S),e(S,N),e(N,Rt),e(Rt,Jo),e(N,Ko),e(N,Qo),e(N,Wo),e(N,Dt),e(Dt,Zo),e(N,er),e(S,tr),e(S,y),e(y,lr),e(y,It),e(It,or),e(y,rr),e(y,Lt),e(Lt,ar),e(y,sr),e(y,Tt),e(Tt,nr),e(y,ir),e(y,Pt),e(Pt,dr),e(y,cr),e(y,At),e(At,ur),e(y,fr),e(y,mr),e(y,hr),e(S,pr),e(S,he),e(he,Er),e(he,St),e(St,vr),e(he,$r),u(t,zl,i),p(pe,t,i),u(t,Fl,i),u(t,Ue,i),e(Ue,_r),u(t,Gl,i),u(t,K,i),u(t,Bl,i),u(t,oe,i),e(oe,yr),e(oe,Nt),e(Nt,br),e(oe,gr),u(t,Ml,i),u(t,z,i),e(z,Q),e(Q,zt),e(zt,wr),e(Q,xr),e(Q,qr),e(Q,kr),e(Q,Ft),e(Ft,Or),e(z,Cr),e(z,W),e(W,Gt),e(Gt,Bt),e(Bt,Rr),e(W,Dr),e(W,Ir),e(W,Lr),e(W,b),e(b,D),e(D,Mt),e(Mt,Tr),e(D,Pr),e(D,Ut),e(Ut,Ar),e(D,Sr),e(D,Nr),e(D,zr),e(D,w),e(w,Fr),e(w,Ht),e(Ht,Gr),e(w,Br),e(w,Yt),e(Yt,Mr),e(w,Ur),e(w,Vt),e(Vt,Hr),e(w,Yr),e(w,jt),e(jt,Vr),e(w,jr),e(b,Xr),e(b,re),e(re,Xt),e(Xt,Jr),e(re,Kr),e(re,Jt),e(Jt,Qr),e(re,Wr),e(b,Zr),e(b,I),e(I,Kt),e(Kt,ea),e(I,ta),e(I,Qt),e(Qt,la),e(I,oa),e(I,ra),e(I,aa),e(I,He),e(He,sa),e(b,na),e(b,ae),e(ae,Wt),e(Wt,ia),e(ae,da),e(ae,Zt),e(Zt,ca),e(ae,ua),e(b,fa),e(b,se),e(se,el),e(el,ma),e(se,ha),e(se,tl),e(tl,pa),e(se,Ea),e(b,va),e(b,L),e(L,ll),e(ll,$a),e(L,_a),e(L,ol),e(ol,ya),e(L,ba),e(L,ga),e(L,wa),e(L,F),e(F,xa),e(F,Ye),e(Ye,qa),e(F,ka),e(F,rl),e(rl,Oa),e(F,Ca),e(z,Ra),e(z,O),e(O,al),e(al,sl),e(sl,Da),e(O,Ia),e(O,nl),e(nl,La),e(O,Ta),p(Ee,O,null),e(O,Pa),e(O,ve),e(ve,Aa),e(ve,il),e(il,Sa),e(ve,Na),e(O,za),p($e,O,null),u(t,Ul,i),p(_e,t,i),u(t,Hl,i),p(ye,t,i),u(t,Yl,i),p(be,t,i),u(t,Vl,i),u(t,Ve,i),e(Ve,Fa),u(t,jl,i),p(ge,t,i),u(t,Xl,i),u(t,je,i),e(je,Ga),u(t,Jl,i),p(we,t,i),u(t,Kl,i),p(xe,t,i),u(t,Ql,i),u(t,G,i),e(G,Ba),e(G,dl),e(dl,Ma),e(G,Ua),e(G,cl),e(cl,Ha),e(G,Ya),u(t,Wl,i),p(qe,t,i),u(t,Zl,i),u(t,Xe,i),e(Xe,B),e(B,Va),e(B,Je),e(Je,ja),e(B,Xa),e(B,ul),e(ul,Ja),e(B,Ka),u(t,eo,i),p(ke,t,i),u(t,to,i),u(t,_,i),e(_,Qa),e(_,fl),e(fl,Wa),e(_,Za),e(_,ml),e(ml,es),e(_,ts),e(_,hl),e(hl,ls),e(_,os),e(_,pl),e(pl,rs),e(_,as),e(_,ss),e(_,ns),e(_,El),e(El,is),e(_,ds),u(t,lo,i),p(Oe,t,i),u(t,oo,i),u(t,Ke,i),e(Ke,M),e(M,cs),e(M,Qe),e(Qe,us),e(M,fs),e(M,vl),e(vl,ms),e(M,hs),u(t,ro,i),p(Ce,t,i),u(t,ao,i),u(t,x,i),e(x,ps),e(x,$l),e($l,Es),e(x,vs),e(x,_l),e(_l,$s),e(x,_s),e(x,yl),e(yl,ys),e(x,bs),e(x,bl),e(bl,gs),e(x,ws),u(t,so,i),p(Re,t,i),u(t,no,i),u(t,We,i),e(We,U),e(U,xs),e(U,Ze),e(Ze,qs),e(U,ks),e(U,gl),e(gl,Os),e(U,Cs),u(t,io,i),p(De,t,i),u(t,co,i),u(t,C,i),e(C,Ie),e(Ie,Rs),p(Le,Ie,null),e(C,Ds),e(C,Te),e(Te,Is),p(Pe,Te,null),e(C,Ls),e(C,Z),e(Z,Ts),e(Z,wl),e(wl,Ps),e(Z,As),p(Ae,Z,null),e(C,Ss),e(C,ee),e(ee,Ns),e(ee,xl),e(xl,zs),e(ee,Fs),p(Se,ee,null),uo=!0},p:xi,i(t){uo||(E(X.$$.fragment,t),E(fe.$$.fragment,t),E(pe.$$.fragment,t),E(Ee.$$.fragment,t),E($e.$$.fragment,t),E(_e.$$.fragment,t),E(ye.$$.fragment,t),E(be.$$.fragment,t),E(ge.$$.fragment,t),E(we.$$.fragment,t),E(xe.$$.fragment,t),E(qe.$$.fragment,t),E(ke.$$.fragment,t),E(Oe.$$.fragment,t),E(Ce.$$.fragment,t),E(Re.$$.fragment,t),E(De.$$.fragment,t),E(Le.$$.fragment,t),E(Pe.$$.fragment,t),E(Ae.$$.fragment,t),E(Se.$$.fragment,t),uo=!0)},o(t){v(X.$$.fragment,t),v(fe.$$.fragment,t),v(pe.$$.fragment,t),v(Ee.$$.fragment,t),v($e.$$.fragment,t),v(_e.$$.fragment,t),v(ye.$$.fragment,t),v(be.$$.fragment,t),v(ge.$$.fragment,t),v(we.$$.fragment,t),v(xe.$$.fragment,t),v(qe.$$.fragment,t),v(ke.$$.fragment,t),v(Oe.$$.fragment,t),v(Ce.$$.fragment,t),v(Re.$$.fragment,t),v(De.$$.fragment,t),v(Le.$$.fragment,t),v(Pe.$$.fragment,t),v(Ae.$$.fragment,t),v(Se.$$.fragment,t),uo=!1},d(t){$(X,t),t&&l(Dl),$(fe,t),t&&l(Il),t&&l(me),t&&l(Ll),t&&l(te),t&&l(Tl),t&&l(g),t&&l(Pl),t&&l(le),t&&l(Al),t&&l(Fe),t&&l(Sl),t&&l(P),t&&l(Nl),t&&l(J),t&&l(zl),$(pe,t),t&&l(Fl),t&&l(Ue),t&&l(Gl),t&&l(K),t&&l(Bl),t&&l(oe),t&&l(Ml),t&&l(z),$(Ee),$($e),t&&l(Ul),$(_e,t),t&&l(Hl),$(ye,t),t&&l(Yl),$(be,t),t&&l(Vl),t&&l(Ve),t&&l(jl),$(ge,t),t&&l(Xl),t&&l(je),t&&l(Jl),$(we,t),t&&l(Kl),$(xe,t),t&&l(Ql),t&&l(G),t&&l(Wl),$(qe,t),t&&l(Zl),t&&l(Xe),t&&l(eo),$(ke,t),t&&l(to),t&&l(_),t&&l(lo),$(Oe,t),t&&l(oo),t&&l(Ke),t&&l(ro),$(Ce,t),t&&l(ao),t&&l(x),t&&l(so),$(Re,t),t&&l(no),t&&l(We),t&&l(io),$(De,t),t&&l(co),t&&l(C),$(Le),$(Pe),$(Ae),$(Se)}}}class Ti extends yi{constructor(X){super(),bi(this,X,null,Oi,gi,{})}}export{Ti as component};
